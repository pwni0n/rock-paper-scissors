<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>
            function getComputerChoice() {
                const randomNum = Math.random();
                if (randomNum > 2/3) {
                    return "rock";
                } else if (randomNum < 1/3) {
                    return "paper";
                }
                return "scissors";
            }

            function playRound(playerSelection, computerSelection) {
                playerSelection = String(playerSelection).toLowerCase();
                const capitalPlayerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);
                const winMessage = `Round Won! ${capitalPlayerSelection} beats ${computerSelection}`;
                const loseMessage = `Round Lost! ${capitalPlayerSelection} beats ${computerSelection}`;
                const tieMessage = "Round Tied!";
                if (playerSelection === "rock") {
                    if (computerSelection === "scissors") {
                        console.log(winMessage);
                        return 1;
                    } else if (computerSelection === "rock") {
                        console.log(tieMessage);
                        return 2;   
                    }
                    console.log(loseMessage);
                    return 0;
                } else if (playerSelection === "paper") {
                    if (computerSelection === "rock") {
                        console.log(winMessage);
                        return 1;
                    } else if (computerSelection === "paper") {
                        console.log(tieMessage);
                        return 2;  
                    }
                    console.log(loseMessage);
                    return 0;
                } else if (playerSelection === "scissors") {
                    if (computerSelection === "paper") {
                        console.log(winMessage);
                        return 1;
                    } else if (computerSelection === "scissors") {
                        console.log(tieMessage);
                        return 2;  
                    }
                    console.log(loseMessage);
                    return 0;
                } else {
                    console.log("PENALTY: Not a valid input");
                    return 0;
                }
            }

            function game() {
                let playerScore = 0;
                let computerScore = 0;

                for (let i = 0; i < 5; i++) {
                    const winner = playRound(prompt("Rock, Paper, or Scissors?"), getComputerChoice());
                    if (winner === 1) {
                        playerScore++;
                    } else if (winner === 0) {
                        computerScore++;
                    }
                    console.log(`Score is (YOU) ${playerScore} - ${computerScore} (COMPUTER)`);
                    // no reason to continue game when it's impossible for one side to win
                    if (playerScore === 3 || computerScore === 3) {
                        break;
                    }
                }

                if (playerScore > computerScore) {
                    console.log("You win! Refresh if you wish to play again.")
                } else if (playerScore < computerScore) {
                    console.log("You lose. Refresh to try again.")
                } else {
                    console.log("The game is tied! Refresh to try again.")
                }
            }

            game();
        </script>
    </body>
</html>